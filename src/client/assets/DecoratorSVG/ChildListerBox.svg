<%
    var names = [],
        child,
        childrenIds = getChildrenIds(),
        i,
        height,
        width,
        longestName = 0,
        offset = 45,
        ownName = getAttribute('name');

    for(i=0;i<childrenIds.length;i+=1){
        child = getNode(childrenIds[i]);
        if(child){
            names.unshift(child.getAttribute('name'));
            if(names[0].length > longestName){
                longestName = names[0].length;
            }
        }
    }

    names = names.sort();
    width = longestName*10 > ownName.length*13 ? longestName*10 : ownName.length*12;

    height = 40 + names.length*20;
%>

<svg xmlns="http://www.w3.org/2000/svg" width="<%=width%>" height="<%=height%>">
    <rect x="5" y="5" rx="20" ry="20" stroke-width="5" stroke="<%= getRegistry('borderColor') || 'black'%>" width="<%=width-10%>" height="<%=height-10%>" fill="<%=getRegistry('color') || 'white'%>"/>
    <text fill="<%= getRegistry('textColor') || 'black'%>" x="<%=width/2%>" y="25" font-family="monospace" font-size="18" font-weight="bold" text-anchor="middle"><%=ownName%></text>
<%
        for(i=0;i<names.length;i+=1){
            %><text fill="<%= getRegistry('textColor') || 'black'%>" x="<%=width/2%>" y="<%=offset%>" font-family="monospace" font-size="14" text-anchor="middle"><%=names[i]%></text><%
            offset+=20;
        }
%>
</svg>